\documentclass{article}

\usepackage{fancyhdr}
\usepackage{amsmath,amssymb,amsthm}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{algorithm,algorithmic}
\pagestyle{fancy}
\lhead{An introduction to the analysis of algorithms\break Michael Soltys}
\rhead{Problem 2.21 Solution\break Ryan McIntyre}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\headheight}{24pt}
\newcommand{\opt}{\text{\sc Opt}}
\pagenumbering{gobble}

\newtheorem{innerthm}{Theorem}
\newenvironment{thm}[1]
	{\renewcommand\theinnerthm{#1}\innerthm}
	{\endinnerthm}

\newtheorem{innerlem}{Lemma}
\newenvironment{lem}[1]
	{\renewcommand\theinnerlem{#1}\innerlem}
	{\endinnerlem}

\newtheorem{innerprb}{Problem}
\newenvironment{prb}[1]
	{\renewcommand\theinnerprb{#1}\innerprb}
	{\endinnerprb}

\begin{document}

\begin{algorithm}
\caption{Job scheduling}%
\label{alg:jobs}%
\begin{algorithmic}[1]
\STATE Sort the jobs in non-increasing order of profits:
  $g_1\geq g_2\geq\ldots\geq g_n$ 
\STATE $d\longleftarrow\max_id_i$ 
\FOR{$t:1..d$} 
     \STATE $S(t)\longleftarrow 0$ 
\ENDFOR
\FOR{$i:1..n$} 
     \STATE Find the largest $t$ such that $S(t)=0$ and $t\leq d_i$,
            $S(t)\longleftarrow i$
\ENDFOR
\end{algorithmic}
\end{algorithm}

\begin{thm}{2.18}\label{thm}
The greedy solution to job scheduling is optimal\index{optimal!job
scheduling}. That is, the profit $P(S)$ of the schedule $S$ computed
by algorithm~\ref{alg:jobs} is as large as possible.
\end{thm}

\begin{lem}{2.19}\label{lem}
``$S$ is promising'' is an invariant for the (second) for-loop
in algorithm~\ref{alg:jobs}.   
\end{lem}

\begin{prb}{2.21}
Why does lemma~\ref{lem} imply theorem~\ref{thm}?
(Hint: this is a simple observation). 
\end{prb}

\begin{proof}
Assume that after every iteration, $S$ is promising. After 
the final iteration, $S$ is still
promising, but the only unscheduled tasks are those that 
cannot extend $S$ at any time. $S$ is 
promising but it cannot be extended outside of the vacuous
re-assignment of ``no task'' to empty time slots; such
extensions do not change the cost of $S$ so it must be optimal.

Identically, assume the last addition made to the schedule is on iteration
$i$. Before it was added,
$S_{i-1}$ was promising, and there was exactly 1 task which could extend
it. Clearly the profit gained from scheduling this task is the same
regardless of when it is scheduled, so every extension of $S_{i-1}$ has
the same profit, equal to that of $S_i$.
\end{proof}


\end{document}
